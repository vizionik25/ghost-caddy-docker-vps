# Ghost Blog Caddyfile
# Automatic HTTPS with Let's Encrypt

{$DOMAIN} {
    # Enable TLS with your email for Let's Encrypt notifications
    tls {$EMAIL}

    # Reverse proxy to Ghost
    # Ghost needs X-Forwarded-Proto to be "https" to prevent redirect loops
    reverse_proxy ghost:2368 {
        header_up X-Forwarded-Proto https
    }

    # Enable gzip compression
    encode gzip
}

# Redirect www to non-www (optional - uncomment if needed)
# www.{$DOMAIN} {
#     redir https://{$DOMAIN}{uri} permanent
# }
